# PostgreSQL и Яндекс Облако 2

### 1. Открываю консоль ЯО


### 2. Создаю Managed Service for PostgreSQL

> Нажимаю на `Managed Service for PostgreSQL`

> Нажимаю `Создать кластер`

### 2.1. Задаю необходимые параметры

* * *
**Базовые параметры**
* * *

**2.1.1. Имя кластера**

> otus-pg-ex-22

**2.1.2. Окружение**

> PRESTABLE

**2.1.3. Версия**

> 16

**2.1.4. Тип**

> cpu-optimized (2 cores, 4 ГБ ОЗУ)

**2.1.5. Размер хранилища**

> network-ssd, 30 ГБ

* * *
**База данных**
* * *

**2.1.6. Имя БД, Имя пользователя, Пароль**

> otus-pg-ex-22

**2.1.7. Локаль сортировки, Локаль набора символов**

> ru_RU.UTF-8

* * *
**Сетевые настройки**
* * *

> Нажимаю `Создать сеть`

**2.1.8. Создание сети**

> otus-pg-ex-22-net

> - [x] Создать подсети

**2.1.9. Группы безопасности**

> Кликаю на `—` > `Добавить группу безопасности`

**2.1.10. Создание группы безопасности**

> Имя: otus-pg-ex-22-secgroup

> Иду в `Virtual Private Cloud` > `Группы безопасности` > `otus-pg-ex-22-secgroup` > `Редактировать` > `Правила (Входящий трафик)` > `Добавить правило`

**2.1.11. Добавление правила для входящего трафика**

**2.1.11.1. Описание**

> Allow IN from my IP

**2.1.11.2. Источник**

> CIDR

**2.1.11.3. CIDR блоки**

> Выполняю в терминале `curl icanhazip.com`

> xx.xx.xxx.0/24

> Нажимаю `Сохранить`

**2.1.12. Добавление правила для исходящего трафика**

**2.1.12.1. Описание**

> Allow OUT

**2.1.12.2. Источник**

> CIDR

**2.1.12.3. CIDR блоки**

> Выполняю в терминале `curl icanhazip.com`

> 0.0.0.0/0

> Нажимаю `Сохранить`

> Возвращаюсь снова на страницу создания кластера

**2.1.13. Группы безопасности**

> Кликаю на `otus-pg-ex-22-secgroup`

**2.1.14. Кликаю `Создать кластер`**

> Дожидаюсь, пока кластер не будет в состоянии `Alive`

### 3. Выполняю подключение

### 3.1. Нажимаю на `...` > `Подключиться`

### 3.2. Устанавливаю сертификат

> Т.к. `psql` у меня уже установлен, пропускаю шаг с его установкой

### 3.3. Подключение.

 **3.3.1. Нажимаю `...` обоих хостов > и выставляю `Публичный доступ [x]`**
 
**3.3.2. Подключение на мастер**

> Успешно

**3.3.3. Создание таблицы**

> Успех
